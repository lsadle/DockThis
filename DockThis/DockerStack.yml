version: '3.7'

services:
  standalone:
    deploy:
      replicas: 1
    image: standalone:1.4
    build: ./StandAlone
    ports: 
      - "8080:80"
  simplicity:
    deploy:
      replicas: 3
    image: simplicity:1.2
    build: ./Simplicity
    ports: 
      - "8081:80"
  dbapi:
    deploy:
      replicas: 3
    image: dbapi:1.1
    build: ./DbApi
    secrets:
      - DockThisDbConnection

secrets:
  DockThisDbConnection:
    external: true